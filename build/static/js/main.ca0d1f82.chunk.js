(this["webpackJsonpreads-frontend"]=this["webpackJsonpreads-frontend"]||[]).push([[0],{20:function(e,t,n){e.exports=n(32)},30:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(16),i=n.n(r),c=n(1),s=function(e){var t=e.book;return o.a.createElement("div",{className:"book-container"},o.a.createElement("img",{src:t.image_url,alt:"cover"}),o.a.createElement("div",{className:"book-info-container"},o.a.createElement("h1",{className:"title"},t.title),o.a.createElement("h2",{className:"author"},t.authors[0]),o.a.createElement("p",null,t.description)))},l=function(e){var t=e.readLists,n=e.addBookToList;return t.map((function(e){return o.a.createElement("button",{key:e.id,onClick:function(){return n(e.id)}},e.name)}))},u=null,m={getReadLists:function(){return console.log("haku",u),fetch("/readlists",{method:"get",headers:{Authorization:u}}).then((function(e){return e.json()}))},postNewList:function(e){return fetch("/readlists",{method:"post",headers:{"Content-Type":"application/json",Authorization:u},body:JSON.stringify(e)}).then((function(e){return e.json()}))},getReadList:function(e){return fetch("/readlists/".concat(e),{method:"get",headers:{Authorization:u}}).then((function(e){return e.json()}))},getBookByIsbn:function(e){return fetch("/book/".concat(e)).then((function(e){return e.json()}))},addBookToList:function(e){return fetch("/books",{method:"post",headers:{"Content-Type":"application/json",Authorization:u},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log("success",e)}))},getBookDetails:function(e){return fetch("/books/".concat(e),{method:"get",headers:{Authorization:u}}).then((function(e){return e.json()})).then((function(e){return console.log(e),e}))},postRating:function(e){return fetch("/recommendations/rate",{method:"post",headers:{"Content-Type":"application/json",Authorization:u},body:JSON.stringify(e)}).then((function(e){return e.json()}))},getRatingSample:function(){return fetch("/recommendations/sample",{method:"get",headers:{Authorization:u}}).then((function(e){return e.json()}))},getRecommendations:function(){return fetch("/recommendations/list",{method:"get",headers:{Authorization:u}}).then((function(e){return e.json()}))},setToken:function(e){console.log("t\xe4\xe4l\xe4"),u="Bearer ".concat(e),console.log("token",u)},token:u},h=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(null),u=Object(c.a)(i,2),h=u[0],f=u[1],d=Object(a.useState)([]),g=Object(c.a)(d,2),b=g[0],p=g[1];Object(a.useEffect)((function(){m.getReadLists().then((function(e){return p(e)}))}),[]);return o.a.createElement("div",{className:"frontpage-app"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(n),m.getBookByIsbn(n).then((function(e){console.log(e),console.log(e.authors[0]),f(e)}))}},o.a.createElement("input",{value:n,onChange:function(e){return r(e.target.value)}}),o.a.createElement("button",{type:"submit"},"l\xe4het\xe4")),h&&o.a.createElement(o.a.Fragment,null,o.a.createElement(s,{book:h}),o.a.createElement(l,{readLists:b,addBookToList:function(e){var t={title:h.title,isbn:h.isbn,isbn13:h.isbn13,image_url:h.image_url,description:h.description,authors:h.authors,readlist_id:e};m.addBookToList(t).then((function(e){return console.log(e)}))}})))},f=function(e){var t=e.listInput,n=e.setListInput,a=e.submitForm;return o.a.createElement("form",{onSubmit:a},o.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}),o.a.createElement("button",{type:"submit"},"Lis\xe4\xe4"))},d=n(4),g=function(e){var t=e.list;return o.a.createElement("div",null,o.a.createElement(d.b,{to:"/list/".concat(t.id)},t.name))},b=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),s=Object(c.a)(i,2),l=s[0],u=s[1],h=Object(a.useState)(!1),d=Object(c.a)(h,2),b=d[0],p=d[1];Object(a.useEffect)((function(){console.log("haku"),m.getReadLists().then((function(e){return r(e)}))}),[]);return o.a.createElement("div",{className:"frontpage-app"},console.log(n),console.log(m.token),n.map((function(e){return o.a.createElement(g,{key:e.id,list:e})})),o.a.createElement("button",{onClick:function(){return p(!b)}},"toggle"),b&&o.a.createElement(f,{listInput:l,setListInput:u,submitForm:function(e){e.preventDefault(),console.log(l),m.postNewList({name:l}).then((function(e){r(n.concat(e)),u("")})).catch((function(e){return console.log(e)}))}}))},p=n(2),E=function(e){var t=e.item;return o.a.createElement("div",{className:"booklist-item-container"},o.a.createElement("h2",{className:"title"},t.title),o.a.createElement("h3",{className:"author"},t.authors[0]),o.a.createElement("p",null,t.description))},j=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(p.h)().id;return Object(a.useEffect)((function(){m.getReadList(i).then((function(e){console.log(e),r(e)}))}),[i]),o.a.createElement(o.a.Fragment,null,n.map((function(e){return o.a.createElement(d.b,{key:e.id,to:"/book/".concat(e.id)},o.a.createElement(E,{key:e.id,item:e}))})))},v=function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(p.h)().id;return console.log(i),Object(a.useEffect)((function(){m.getBookDetails(i).then((function(e){return r(e)}))}),[i]),o.a.createElement(o.a.Fragment,null,n&&o.a.createElement(s,{book:n}))},k=n(13),O=n(18),y=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){m.getRatingSample().then((function(e){return r(e)}))}),[]);return n.length>0?n.map((function(e){return o.a.createElement("div",{key:e.title},o.a.createElement(E,{item:e}),o.a.createElement(O.a,{stop:10,fractions:2,onChange:function(t){return function(e,t){console.log("value",t,e);var n=Object(k.a)(Object(k.a)({},e),{},{rated:3});console.log(n),m.postRating(n).then((function(e){return console.log(e)}))}(e,t)}}))})):o.a.createElement(o.a.Fragment,null)},S=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){m.getRecommendations().then((function(e){return r(e)}))}),[]);return o.a.createElement(o.a.Fragment,null,"Suositukset",n.map((function(e){return o.a.createElement(E,{item:e})})))},w=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),s=Object(c.a)(i,2),l=s[0],u=s[1],m=Object(a.useState)(""),h=Object(c.a)(m,2),f=h[0],d=h[1];return o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={email:n,username:l,password:f};fetch("/user/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log(e),r(""),u(""),d("")})),console.log(t)}},o.a.createElement("div",null,"s\xe4hk\xf6posti",o.a.createElement("input",{value:n,onChange:function(e){return r(e.target.value)}})),o.a.createElement("div",null,"k\xe4ytt\xe4j\xe4tunnus",o.a.createElement("input",{value:l,onChange:function(e){return u(e.target.value)}})),o.a.createElement("div",null,"salasana",o.a.createElement("input",{value:f,onChange:function(e){return d(e.target.value)}})),o.a.createElement("button",{type:"submit"},"rekister\xf6idy"))},C=function(e){var t=e.setUser,n=Object(a.useState)(""),r=Object(c.a)(n,2),i=r[0],s=r[1],l=Object(a.useState)(""),u=Object(c.a)(l,2),h=u[0],f=u[1],d=Object(p.g)();return o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={username:i,password:h};fetch("/user/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log(e.token),t(e),m.setToken(e.token),window.localStorage.setItem("loggedUser",JSON.stringify(e));var n=e.taste_tested?"/":"/rate";d.push(n)}))}},o.a.createElement("div",null,"username",o.a.createElement("input",{value:i,onChange:function(e){return s(e.target.value)}})),o.a.createElement("div",null,"password",o.a.createElement("input",{value:h,onChange:function(e){return f(e.target.value)}})),o.a.createElement("button",{type:"submit"},"kirjaudu"))},A=n(19),N=function(e){var t=e.component,n=e.path,a=e.isAuth,r=Object(A.a)(e,["component","path","isAuth"]);return o.a.createElement(p.b,{path:n},a?o.a.createElement(t,r):o.a.createElement(p.a,{to:"/login"}))},L=function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),n=t[0],r=t[1];return o.a.createElement(d.a,null,o.a.createElement("div",null,o.a.createElement(d.b,{to:"/"},"Listat"),o.a.createElement(d.b,{to:"/etsi"},"etsi"),o.a.createElement(d.b,{to:"/rate"},"rate"),o.a.createElement(d.b,{to:"/list"},"listoja"),o.a.createElement(d.b,{to:"/recommendations"},"suositukset"),o.a.createElement(d.b,{to:"/register"},"rekister\xf6idy")),o.a.createElement(p.d,null,o.a.createElement(N,{component:j,path:"/list/:id",isAuth:!!n}),o.a.createElement(N,{component:b,path:"/list",isAuth:!!n}),o.a.createElement(N,{component:h,path:"/etsi",isAuth:!!n}),o.a.createElement(N,{component:v,path:"/book/:id",isAuth:!!n}),o.a.createElement(N,{component:y,path:"/rate",isAuth:!!n}),o.a.createElement(N,{component:S,path:"/recommendations",isAuth:!!n}),o.a.createElement(p.b,{path:"/register"},o.a.createElement(w,null)),o.a.createElement(p.b,{path:"/login"},o.a.createElement(C,{setUser:r})),o.a.createElement(p.b,{path:"/"},n?o.a.createElement(o.a.Fragment,null,o.a.createElement(h,null),o.a.createElement(b,null),o.a.createElement(S,null)):o.a.createElement(p.a,{to:"/login"}))))};n(30),n(31);i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(L,{books:[{isbn:"0060512148",isbn13:"9780060512149",title:"Angels",authors:["Marian Keyes"],image:"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1407711412l/82747._SX98_.jpg",description:"Maggie has always been the white sheep of the Walsh family.Unlike her comically dysfunctional sisters,Rachel(heroine of Rachel's Holiday) and Claire (heroine of Watermelon), she married a decent man who adored her and found herself a solid career. Where Rachel was reckless and Claire dramatic, Maggie settled early for safety. Or so she believed until she discovers that her husband is having an affair and her boss is going to fire her. Suddenly, her perfectly organized life has become a perfect mess."},{isbn:"0440241901",isbn13:"9780440241904",title:"Can You Keep a Secret?",authors:["Sophie Kinsella"],image:"https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1330464293l/33724._SY160_.jpg",description:"Meet Emma Corrigan, a young woman with a huge heart, an irrepressible spirit, and a few little secrets: Secrets from her boyfriend: I've always thought Connor looks a bit like Ken. As in Barbie and Ken. Secrets from her mother: I lost my virginity in the spare bedroom with Danny Nussbaum while Mum and Dad were downstairs watching Ben-Hur"}]})),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.ca0d1f82.chunk.js.map